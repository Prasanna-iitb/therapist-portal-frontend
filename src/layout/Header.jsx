import './Header.css';
import { useState, useEffect, useRef } from 'react';
import { useNavigate } from 'react-router-dom';
import { API_BASE_URL } from '../config';

function Header() {
  const [activePage, setActivePage] = useState('home');
  const [showUserMenu, setShowUserMenu] = useState(false);
  const [user, setUser] = useState(null);
  const menuRef = useRef(null);
  const navigate = useNavigate();

  useEffect(() => {
    // Fetch user info
    fetchUser();

    // Close menu when clicking outside
    const handleClickOutside = (event) => {
      if (menuRef.current && !menuRef.current.contains(event.target)) {
        setShowUserMenu(false);
      }
    };

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, []);

  const fetchUser = async () => {
    const token = localStorage.getItem('token');
    if (!token) return;

    try {
      const response = await fetch(`${API_BASE_URL}/auth/me`, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      });

      if (response.ok) {
        const data = await response.json();
        setUser(data.user);
      }
    } catch (error) {
      console.error('Failed to fetch user:', error);
    }
  };

  const handleLogout = async () => {
    try {
      const token = localStorage.getItem('token');
      await fetch('${API_BASE_URL}/auth/logout', {
        method: 'POST',
        headers: {
          Authorization: `Bearer ${token}`,
        },
      });
    } catch (error) {
      console.error('Logout failed:', error);
    } finally {
      localStorage.removeItem('token');
      navigate('/login');
    }
  };

  const getUserInitials = () => {
    if (user?.name) {
      const names = user.name.split(' ');
      if (names.length >= 2) {
        return (names[0][0] + names[1][0]).toUpperCase();
      }
      return names[0].substring(0, 2).toUpperCase();
    }
    return 'DR';
  };

  return (
    <header className="header">
      <div className="header-left">
        <div className="logo-container">
          <div className="logo">
            <svg className="brain-icon" width="21" height="20" viewBox="0 0 21 20" fill="none">
              <path d="M4.31386 8.4363C4.18769 8.4363 4.06153 8.4256 3.93536 8.4085C3.9931 8.41705 4.04869 8.42346 4.10643 8.43202C3.87976 8.3978 3.6595 8.33793 3.4478 8.25025C3.49912 8.27164 3.55044 8.29302 3.60176 8.3144C3.44566 8.24811 3.29597 8.16685 3.15483 8.07276C3.11634 8.0471 3.07785 8.01289 3.03722 7.98936C3.18905 8.0749 3.09495 8.03427 3.05432 8.00006C2.99445 7.95087 2.93885 7.89741 2.88325 7.84181C2.82551 7.78407 2.76991 7.72206 2.71645 7.65791C2.61808 7.54029 2.78916 7.76269 2.71859 7.66218C2.69507 7.62797 2.67155 7.59589 2.64802 7.55954C2.55607 7.42054 2.47909 7.27513 2.4128 7.1233C2.43418 7.17462 2.45556 7.22594 2.47695 7.27727C2.385 7.05701 2.32298 6.8282 2.2909 6.59297C2.29946 6.65071 2.30587 6.70631 2.31443 6.76404C2.28449 6.52668 2.28449 6.28717 2.31657 6.04981C2.30801 6.10754 2.3016 6.16314 2.29304 6.22088C2.32726 5.98565 2.38927 5.75898 2.48122 5.54086C2.45984 5.59218 2.43846 5.6435 2.41707 5.69483C2.48122 5.54514 2.56035 5.39972 2.65016 5.26286C2.67368 5.22651 2.69934 5.1923 2.72501 5.15808C2.76777 5.09607 2.63091 5.27783 2.67796 5.2201C2.69079 5.20513 2.70148 5.19016 2.71431 5.17519C2.76991 5.1089 2.82765 5.04474 2.88753 4.98487C2.94526 4.92713 3.00514 4.87367 3.06715 4.82021C3.08212 4.80738 3.09923 4.79669 3.11206 4.78386C3.10778 4.79027 2.98162 4.88222 3.05005 4.8309C3.08426 4.80524 3.12062 4.77958 3.15483 4.75606C3.29383 4.66196 3.44352 4.58284 3.59749 4.51655C3.54616 4.53794 3.49484 4.55932 3.44352 4.5807C3.64239 4.49731 3.84982 4.43743 4.06366 4.40321C4.21335 4.37969 4.37374 4.23428 4.44644 4.10811C4.5277 3.97125 4.56192 3.7681 4.5106 3.61413C4.46141 3.45803 4.36518 3.30834 4.21549 3.23135C4.05297 3.14582 3.90114 3.13726 3.72151 3.1672C3.14628 3.26129 2.62664 3.53073 2.17757 3.89641C1.73064 4.25994 1.41629 4.75178 1.20886 5.28211C0.734127 6.50529 1.11263 7.9915 2.08775 8.8597C2.70362 9.40714 3.48415 9.71294 4.30958 9.71935C4.64532 9.72149 4.96608 9.42211 4.95111 9.07782C4.94042 8.72712 4.67525 8.43843 4.31386 8.4363Z" fill="white" stroke="white" strokeWidth="0.226945"/>
              <path d="M1.4462 7.08464C0.498876 7.83523 -0.0164863 9.1076 0.141758 10.3051C0.216603 10.8761 0.396231 11.4299 0.727688 11.9068C1.04631 12.3666 1.45262 12.76 1.94018 13.0402C2.48762 13.3524 3.11631 13.5192 3.74501 13.5192C4.08075 13.5192 4.40151 13.2241 4.38654 12.8776C4.37157 12.5291 4.10427 12.2361 3.74501 12.2361C3.60602 12.2361 3.46702 12.2254 3.32802 12.2083C3.38576 12.2169 3.44136 12.2233 3.49909 12.2318C3.24248 12.1955 2.99229 12.1249 2.75064 12.0266C2.80197 12.0479 2.85329 12.0693 2.90461 12.0907C2.7314 12.0159 2.5646 11.9282 2.40849 11.8234C2.37 11.7977 2.33151 11.7699 2.29302 11.7421C2.21176 11.6844 2.40208 11.832 2.34434 11.7828C2.32723 11.7678 2.30799 11.7528 2.29088 11.7379C2.21817 11.678 2.14974 11.616 2.08345 11.5497C2.01716 11.4834 1.95515 11.415 1.89527 11.3423C1.88244 11.3273 1.87175 11.3123 1.85892 11.2995C1.78621 11.2118 1.95729 11.4342 1.89099 11.3401C1.86747 11.3059 1.84181 11.2717 1.81829 11.2375C1.70923 11.0771 1.61941 10.9082 1.54243 10.7307C1.56381 10.782 1.5852 10.8333 1.60658 10.8846C1.50608 10.6451 1.43765 10.3949 1.40129 10.1362C1.40985 10.1939 1.41626 10.2495 1.42482 10.3073C1.38846 10.0335 1.38846 9.75768 1.42268 9.48396C1.41412 9.5417 1.40771 9.5973 1.39915 9.65503C1.43551 9.39201 1.50608 9.13967 1.60872 8.89375C1.58734 8.94507 1.56595 8.9964 1.54457 9.04772C1.59375 8.93438 1.64935 8.82318 1.71137 8.71626C1.7413 8.66494 1.77124 8.61576 1.80546 8.56657C1.83539 8.5238 1.90596 8.45965 1.91665 8.41047C1.89527 8.43613 1.87602 8.46393 1.85464 8.48959C1.86747 8.47248 1.88244 8.45537 1.89527 8.44041C1.91238 8.41902 1.92949 8.39977 1.94659 8.38053C1.98508 8.33562 2.02571 8.29285 2.06635 8.25222C2.15616 8.16027 2.25239 8.07687 2.3529 7.99775C2.47265 7.90366 2.54108 7.68982 2.54108 7.5444C2.54108 7.38616 2.47051 7.20012 2.3529 7.09106C2.231 6.97986 2.07062 6.89646 1.89955 6.90287C1.71992 6.90501 1.58734 6.97344 1.4462 7.08464Z" fill="white" stroke="white" strokeWidth="0.226945"/>
              <path d="M5.20983 4.56567C5.16492 4.53787 5.11787 4.51007 5.07511 4.47799C5.03661 4.45019 4.95535 4.37321 5.10291 4.50151C5.0858 4.48654 5.06869 4.47371 5.05372 4.46088C4.96818 4.38818 4.88906 4.30905 4.81422 4.22565C4.80566 4.2171 4.77145 4.16578 4.76289 4.16364C4.77786 4.16578 4.86554 4.3005 4.79497 4.20427C4.76289 4.1615 4.73296 4.11659 4.70516 4.07169C4.64528 3.97546 4.5961 3.87495 4.55119 3.77017C4.57257 3.82149 4.59396 3.87281 4.61534 3.92414C4.54478 3.74878 4.49559 3.56916 4.46993 3.38097C4.47848 3.43871 4.4849 3.49431 4.49345 3.55205C4.46993 3.35959 4.46993 3.16713 4.49559 2.97467C4.48704 3.03241 4.48062 3.08801 4.47207 3.14575C4.49773 2.96398 4.54691 2.78863 4.61534 2.61969C4.59396 2.67102 4.57257 2.72234 4.55119 2.77366C4.60679 2.64322 4.67308 2.51919 4.75006 2.40157C4.76503 2.37805 4.78214 2.35667 4.79925 2.33314C4.85912 2.24547 4.68377 2.47214 4.78428 2.35239C4.82705 2.30321 4.86982 2.25402 4.91686 2.20698C4.96391 2.15993 5.01095 2.11716 5.06228 2.07439C5.18203 1.97389 4.95535 2.14924 5.04303 2.08936C5.06655 2.07439 5.08794 2.05729 5.11146 2.04018C5.22907 1.96106 5.3531 1.89477 5.48355 1.8413C5.43222 1.86269 5.3809 1.88407 5.32958 1.90546C5.49852 1.83703 5.67601 1.78784 5.85563 1.76218C5.7979 1.77074 5.7423 1.77715 5.68456 1.78571C5.87916 1.76004 6.07589 1.76004 6.27049 1.78571C6.21275 1.77715 6.15715 1.77074 6.09941 1.76218C6.2876 1.78998 6.46722 1.83917 6.64258 1.90973C6.59125 1.88835 6.53993 1.86697 6.48861 1.84558C6.61691 1.90118 6.73667 1.96533 6.85214 2.04232C7.15152 2.23905 7.54927 2.08936 7.7289 1.81137C7.75242 1.77715 7.77808 1.74294 7.79947 1.70872C7.69468 1.8691 7.74387 1.78143 7.77808 1.74294C7.8294 1.6852 7.885 1.63174 7.94488 1.58042C8.05394 1.48846 7.82727 1.65954 7.92563 1.59539C7.95557 1.57614 7.98551 1.55475 8.01759 1.53551C8.08388 1.49488 8.15445 1.46066 8.22715 1.43073C8.17583 1.45211 8.12451 1.47349 8.07319 1.49488C8.20363 1.44356 8.33621 1.4072 8.47307 1.3901C8.41533 1.39865 8.35974 1.40506 8.302 1.41362C8.43672 1.39865 8.57144 1.39865 8.70616 1.41576C8.64842 1.4072 8.59282 1.40079 8.53509 1.39223C8.67836 1.41148 8.81522 1.44997 8.9478 1.50557C8.89648 1.48419 8.84516 1.4628 8.79384 1.44142C8.87937 1.47991 8.96277 1.52268 9.03976 1.574C9.04403 1.57614 9.10819 1.61891 9.10819 1.62105C9.10819 1.62318 8.97774 1.51412 9.04403 1.57186C9.08253 1.60608 9.12102 1.63815 9.15737 1.67451C9.18945 1.70658 9.22152 1.74294 9.25146 1.77715C9.28568 1.81564 9.3092 1.8798 9.21083 1.72369C9.22366 1.74294 9.23863 1.76218 9.25146 1.78143C9.30706 1.86269 9.35197 1.94823 9.39046 2.03804C9.36907 1.98672 9.34769 1.9354 9.32631 1.88407C9.38191 2.01666 9.41826 2.15352 9.43964 2.29679C9.43109 2.23905 9.42467 2.18345 9.41612 2.12572C9.43964 2.31176 9.42895 2.50422 9.42895 2.69026C9.42895 3.04952 9.42895 3.41091 9.42895 3.77017C9.42895 4.30905 9.42895 4.85008 9.42895 5.38896C9.42895 6.05187 9.42895 6.71479 9.42895 7.37556C9.42895 8.10691 9.42895 8.83825 9.42895 9.56745C9.42895 10.3009 9.42895 11.0366 9.42895 11.77C9.42895 12.4522 9.42895 13.1365 9.42895 13.8187C9.42895 14.3918 9.42895 14.967 9.42895 15.5401C9.42895 15.9485 9.42895 16.357 9.42895 16.7654C9.42895 16.945 9.42895 17.1268 9.42895 17.3064C9.42895 17.3898 9.42467 17.4732 9.41398 17.5566C9.42254 17.4989 9.42895 17.4433 9.4375 17.3856C9.41612 17.5481 9.37335 17.7042 9.31134 17.856C9.33272 17.8047 9.35411 17.7534 9.37549 17.702C9.33058 17.8068 9.27926 17.9052 9.21725 17.9993C9.20228 18.0228 9.18517 18.0463 9.1702 18.0677C9.10819 18.1597 9.27071 17.948 9.20228 18.0271C9.16379 18.0741 9.12316 18.119 9.08039 18.1618C9.03976 18.2024 8.99913 18.2367 8.95636 18.2751C8.86013 18.3607 9.05473 18.2067 8.99913 18.2431C8.9756 18.258 8.95422 18.2751 8.9307 18.2923C8.83233 18.3585 8.72968 18.412 8.62062 18.459C8.67195 18.4377 8.72327 18.4163 8.77459 18.3949C8.62276 18.4569 8.46666 18.4997 8.30414 18.5211C8.36187 18.5125 8.41747 18.5061 8.47521 18.4975C8.31697 18.5168 8.15872 18.5168 8.00048 18.4975C8.05822 18.5061 8.11382 18.5125 8.17155 18.5211C8.00903 18.4997 7.85293 18.4569 7.7011 18.3949C7.75242 18.4163 7.80374 18.4377 7.85507 18.459C7.75028 18.4141 7.65192 18.3628 7.55782 18.3008C7.5343 18.2858 7.51078 18.2687 7.48939 18.2538C7.39744 18.1917 7.60915 18.3543 7.53002 18.2858C7.48512 18.2473 7.43807 18.2067 7.3953 18.1639C7.35467 18.1233 7.32046 18.0827 7.28197 18.0399C7.19643 17.9437 7.3504 18.1383 7.31404 18.0827C7.29907 18.0592 7.28197 18.0378 7.26486 18.0143C7.19857 17.9159 7.14511 17.8132 7.09806 17.7042C7.11945 17.7555 7.14083 17.8068 7.16221 17.8582C7.1002 17.7063 7.05743 17.5502 7.03605 17.3877C7.0446 17.4454 7.05102 17.501 7.05957 17.5588C7.04032 17.4027 7.04032 17.2466 7.05957 17.0905C7.05102 17.1482 7.0446 17.2038 7.03605 17.2615C7.04888 17.161 7.07026 17.0648 7.09806 16.9686C7.23706 16.4831 6.77516 16.0704 6.30898 16.1795C6.21703 16.2009 6.12508 16.218 6.03312 16.2308C6.09086 16.2223 6.14646 16.2158 6.2042 16.2073C5.97752 16.2351 5.74871 16.2329 5.52204 16.203C5.57978 16.2116 5.63537 16.218 5.69311 16.2265C5.47285 16.1945 5.26115 16.1367 5.05586 16.0512C5.10718 16.0726 5.1585 16.0939 5.20983 16.1153C5.06228 16.0533 4.92114 15.9785 4.78856 15.8887C4.75434 15.8651 4.72013 15.8416 4.68591 15.8159C4.58327 15.7432 4.80139 15.9122 4.70516 15.8309C4.641 15.7775 4.57899 15.7219 4.51911 15.662C4.46351 15.6064 4.41005 15.5465 4.35873 15.4866C4.35445 15.4802 4.32238 15.4503 4.32238 15.4439C4.32238 15.4439 4.42288 15.5786 4.37156 15.508C4.34804 15.4738 4.32238 15.4396 4.29886 15.4054C4.2069 15.2685 4.12992 15.1231 4.06577 14.9713C4.08715 15.0226 4.10853 15.0739 4.12992 15.1252C4.04438 14.9199 3.98664 14.7082 3.95457 14.488C3.96312 14.5457 3.96954 14.6013 3.97809 14.6591C3.94815 14.4302 3.94601 14.1993 3.97595 13.9705C3.9674 14.0282 3.96098 14.0838 3.95243 14.1416C3.98237 13.9149 4.04224 13.6968 4.12778 13.4851C4.1064 13.5364 4.08501 13.5877 4.06363 13.639C4.1235 13.4979 4.19407 13.3632 4.27747 13.2349C4.31169 13.1814 4.35232 13.1301 4.38867 13.0766C4.28389 13.2284 4.35232 13.1258 4.38012 13.0916C4.40792 13.0595 4.43572 13.0296 4.46351 12.9996C4.51698 12.944 4.57044 12.8906 4.62817 12.8393C4.65384 12.8157 4.68163 12.7922 4.70943 12.7708C4.79711 12.6938 4.58968 12.8564 4.69233 12.7837C4.81849 12.6938 4.95108 12.6147 5.09007 12.5463C5.39159 12.3987 5.49852 11.9454 5.32103 11.6695C5.12215 11.3595 4.76717 11.2803 4.44427 11.4386C3.26386 12.016 2.52823 13.3546 2.69503 14.6612C2.7656 15.2086 2.94523 15.7368 3.28096 16.1816C3.606 16.6136 4.01444 16.9835 4.51056 17.2059C5.19272 17.5096 5.91979 17.5908 6.65327 17.4198C6.39024 17.1567 6.12721 16.8937 5.86419 16.6307C5.61399 17.501 5.86205 18.4783 6.52069 19.107C7.14511 19.7036 8.05394 19.9431 8.89221 19.7164C9.71122 19.4962 10.3613 18.8482 10.6136 18.0442C10.6949 17.7812 10.7206 17.5032 10.7206 17.2273C10.7206 16.8317 10.7206 16.4361 10.7206 16.0426C10.7206 15.3113 10.7206 14.5778 10.7206 13.8465C10.7206 12.9205 10.7206 11.9946 10.7206 11.0686C10.7206 10.0807 10.7206 9.09272 10.7206 8.10691C10.7206 7.20021 10.7206 6.29566 10.7206 5.38896C10.7206 4.7068 10.7206 4.02464 10.7206 3.34248C10.7206 3.01744 10.7206 2.6924 10.7206 2.36736C10.7184 1.7964 10.5131 1.25965 10.1304 0.836242C9.5487 0.190436 8.55006 -0.0533448 7.73959 0.26742C7.27555 0.451325 6.90133 0.752843 6.62761 1.17198C6.92057 1.09499 7.21354 1.01801 7.50436 0.941025C7.00183 0.609569 6.3603 0.438494 5.7594 0.500509C5.17347 0.560385 4.65811 0.769951 4.19835 1.1399C3.33442 1.83061 2.97944 3.07518 3.32373 4.12301C3.53757 4.77523 3.97381 5.32695 4.56402 5.68406C4.85057 5.85728 5.28253 5.75677 5.44078 5.45311C5.6033 5.13235 5.51562 4.75171 5.20983 4.56567Z" fill="white" stroke="white" strokeWidth="0.226945"/>
              <path d="M16.0881 4.40309C16.3019 4.4373 16.5093 4.49718 16.7082 4.58058C16.6569 4.55919 16.6056 4.53781 16.5542 4.51642C16.7039 4.58058 16.8493 4.65756 16.9862 4.74951C17.0226 4.77304 17.0568 4.7987 17.091 4.82436C17.1936 4.8992 16.9755 4.73027 17.0739 4.81153C17.1402 4.86713 17.2043 4.92486 17.2642 4.98474C17.3219 5.04248 17.3754 5.10235 17.4289 5.16437C17.4417 5.17934 17.4524 5.19431 17.4652 5.20928C17.5187 5.27557 17.4203 5.15368 17.4182 5.14726C17.4374 5.18361 17.4695 5.21783 17.493 5.25204C17.5871 5.39104 17.6662 5.54073 17.7347 5.6947C17.7133 5.64338 17.6919 5.59206 17.6705 5.54073C17.7625 5.75885 17.8245 5.98553 17.8587 6.22075C17.8501 6.16302 17.8437 6.10742 17.8352 6.04968C17.8672 6.28704 17.8672 6.52655 17.8373 6.76392C17.8459 6.70618 17.8523 6.65058 17.8608 6.59284C17.8288 6.82807 17.7667 7.05688 17.6748 7.27714C17.6962 7.22582 17.7176 7.17449 17.7389 7.12317C17.6769 7.27072 17.6021 7.41186 17.5144 7.54444C17.4887 7.58507 17.4609 7.62143 17.4331 7.66206C17.3668 7.75829 17.5294 7.54872 17.446 7.64495C17.3925 7.70696 17.3391 7.77112 17.2813 7.82885C17.2279 7.88231 17.1723 7.93577 17.1145 7.98496C17.0867 8.00848 17.0568 8.032 17.029 8.05553C17.1808 7.92722 17.0482 8.03842 17.0097 8.06408C16.8665 8.16245 16.7125 8.24371 16.5521 8.31214C16.6034 8.29075 16.6548 8.26937 16.7061 8.24799C16.4944 8.33566 16.2741 8.39768 16.0453 8.43189C16.103 8.42334 16.1586 8.41692 16.2164 8.40837C16.0902 8.42548 15.9662 8.43403 15.8379 8.43617C15.5021 8.43831 15.1814 8.72913 15.1963 9.0777C15.2113 9.42412 15.4786 9.72136 15.8379 9.71923C16.612 9.71281 17.3326 9.44337 17.9357 8.96436C18.4489 8.55592 18.8253 7.97213 19.0113 7.34343C19.3577 6.17157 19.0006 4.83933 18.1025 4.00748C17.6406 3.57979 17.0546 3.26972 16.4302 3.16707C16.2549 3.13927 16.0945 3.13927 15.9362 3.23123C15.8037 3.30821 15.6754 3.46218 15.6411 3.61401C15.5684 3.92408 15.7331 4.34535 16.0881 4.40309Z" fill="white" stroke="white" strokeWidth="0.226945"/>
              <path d="M17.8009 7.99142C17.8972 8.06841 17.9891 8.14967 18.0768 8.2352C18.1174 8.27583 18.1581 8.3186 18.1966 8.36351C18.2372 8.40842 18.3612 8.58591 18.2393 8.40628C18.3805 8.61371 18.5109 8.81472 18.6114 9.04567C18.59 8.99435 18.5686 8.94302 18.5473 8.8917C18.6499 9.13548 18.7183 9.38996 18.7568 9.65298C18.7483 9.59524 18.7419 9.53965 18.7333 9.48191C18.7697 9.75563 18.7697 10.0315 18.7312 10.3052C18.7397 10.2475 18.7461 10.1919 18.7547 10.1341C18.7183 10.3907 18.6478 10.6409 18.5494 10.8826C18.5708 10.8313 18.5922 10.7799 18.6135 10.7286C18.5387 10.9018 18.451 11.0686 18.3462 11.2247C18.3206 11.2632 18.2928 11.3017 18.265 11.3402C18.2072 11.4215 18.3548 11.2311 18.3056 11.2889C18.2906 11.306 18.2757 11.3252 18.2607 11.3423C18.2008 11.415 18.1388 11.4835 18.0725 11.5498C18.0062 11.6161 17.9378 11.6781 17.8651 11.738C17.8501 11.7508 17.8352 11.7615 17.8223 11.7743C17.7347 11.847 17.957 11.6759 17.863 11.7422C17.8287 11.7658 17.7945 11.7914 17.7603 11.8149C17.5999 11.924 17.431 12.0138 17.2535 12.0908C17.3048 12.0694 17.3561 12.048 17.4075 12.0266C17.168 12.1271 16.9178 12.1956 16.659 12.2319C16.7168 12.2234 16.7724 12.217 16.8301 12.2084C16.6911 12.2277 16.5521 12.2362 16.4131 12.2362C16.0774 12.2362 15.7566 12.5313 15.7716 12.8777C15.7865 13.2263 16.0538 13.5193 16.4131 13.5193C17.4951 13.5193 18.5729 13.0189 19.2401 12.1614C19.5908 11.7102 19.856 11.1991 19.9672 10.6345C20.0869 10.0208 20.0698 9.37713 19.8709 8.7805C19.6528 8.12187 19.2551 7.51669 18.7098 7.08473C18.5708 6.97567 18.4403 6.89655 18.2564 6.89655C18.0982 6.89655 17.9121 6.96711 17.8031 7.08473C17.6919 7.20662 17.6085 7.367 17.6149 7.53807C17.6192 7.69632 17.6705 7.88878 17.8009 7.99142Z" fill="white" stroke="white" strokeWidth="0.226945"/>
              <path d="M15.0615 12.5398C15.1984 12.6061 15.3224 12.6853 15.4486 12.7708C15.5555 12.8414 15.3459 12.6831 15.4379 12.7622C15.4657 12.7858 15.4956 12.8093 15.5234 12.8349C15.5876 12.8927 15.6496 12.9526 15.7095 13.0167C15.7351 13.0445 15.7608 13.0745 15.7865 13.1044C15.8784 13.2135 15.7415 13.0381 15.7779 13.0894C15.8143 13.1407 15.8527 13.1921 15.887 13.2477C15.9661 13.3717 16.0324 13.5021 16.0901 13.6369C16.0687 13.5855 16.0473 13.5342 16.026 13.4829C16.1136 13.6946 16.1714 13.9127 16.2013 14.1394C16.1928 14.0817 16.1863 14.0261 16.1778 13.9683C16.2056 14.1971 16.2056 14.4281 16.1756 14.6569C16.1842 14.5992 16.1906 14.5436 16.1992 14.4858C16.1671 14.7061 16.1094 14.9178 16.0238 15.1231C16.0452 15.0717 16.0666 15.0204 16.088 14.9691C16.026 15.1167 15.9511 15.2578 15.8613 15.3904C15.8378 15.4246 15.8143 15.4588 15.7886 15.493C15.7159 15.5957 15.8848 15.3775 15.8036 15.4738C15.7501 15.5379 15.6945 15.5999 15.6346 15.6598C15.579 15.7154 15.5192 15.7689 15.4593 15.8202C15.4529 15.8245 15.4229 15.8566 15.4165 15.8566C15.4165 15.8566 15.5512 15.756 15.4807 15.8074C15.4464 15.8309 15.4122 15.8566 15.378 15.8801C15.2412 15.972 15.0957 16.049 14.9439 16.1132C14.9952 16.0918 15.0466 16.0704 15.0979 16.049C14.8926 16.1345 14.6809 16.1923 14.4606 16.2244C14.5184 16.2158 14.574 16.2094 14.6317 16.2008C14.405 16.2308 14.1762 16.2308 13.9495 16.2051C14.0073 16.2137 14.0629 16.2201 14.1206 16.2286C14.0265 16.2158 13.9367 16.1987 13.8448 16.1773C13.3786 16.0683 12.9167 16.481 13.0557 16.9664C13.0835 17.0626 13.1049 17.161 13.1177 17.2594C13.1091 17.2016 13.1027 17.146 13.0942 17.0883C13.1113 17.2444 13.1113 17.4005 13.0942 17.5566C13.1027 17.4989 13.1091 17.4433 13.1177 17.3855C13.0963 17.548 13.0535 17.7042 12.9915 17.856C13.0129 17.8047 13.0343 17.7533 13.0557 17.702C13.0108 17.8068 12.9594 17.9052 12.8974 17.9993C12.8825 18.0228 12.8654 18.0463 12.8504 18.0677C12.7884 18.1596 12.9509 17.9479 12.8825 18.0271C12.844 18.0741 12.8033 18.119 12.7606 18.1618C12.7199 18.2024 12.6793 18.2366 12.6365 18.2751C12.5403 18.3607 12.7349 18.2067 12.6793 18.243C12.6558 18.258 12.6344 18.2751 12.6109 18.2922C12.5125 18.3585 12.4099 18.412 12.3008 18.459C12.3521 18.4376 12.4035 18.4163 12.4548 18.3949C12.303 18.4569 12.1468 18.4997 11.9843 18.521C12.0421 18.5125 12.0977 18.5061 12.1554 18.4975C11.9972 18.5168 11.8389 18.5168 11.6807 18.4975C11.7384 18.5061 11.794 18.5125 11.8517 18.521C11.6892 18.4997 11.5331 18.4569 11.3813 18.3949C11.4326 18.4163 11.4839 18.4376 11.5353 18.459C11.4326 18.4141 11.3321 18.3628 11.238 18.3008C11.2145 18.2858 11.191 18.2687 11.1696 18.2537C11.0776 18.1917 11.2893 18.3542 11.2102 18.2858C11.1653 18.2473 11.1183 18.2067 11.0755 18.1639C11.0349 18.1233 11.0006 18.0827 10.9622 18.0399C10.8766 17.9437 11.0306 18.1383 10.9942 18.0827C10.9793 18.0591 10.9622 18.0378 10.945 18.0142C10.8809 17.9159 10.8253 17.8132 10.7782 17.7042C10.7996 17.7555 10.821 17.8068 10.8424 17.8581C10.7804 17.7063 10.7376 17.5502 10.7162 17.3877C10.7248 17.4454 10.7312 17.501 10.7398 17.5587C10.7162 17.3641 10.7248 17.1653 10.7248 16.9707C10.7248 16.6136 10.7248 16.2543 10.7248 15.8972C10.7248 15.3583 10.7248 14.8216 10.7248 14.2827C10.7248 13.6219 10.7248 12.959 10.7248 12.2982C10.7248 11.5669 10.7248 10.8377 10.7248 10.1063C10.7248 9.37283 10.7248 8.63721 10.7248 7.90373C10.7248 7.21943 10.7248 6.53727 10.7248 5.85297C10.7248 5.27773 10.7248 4.7025 10.7248 4.12726C10.7248 3.71668 10.7248 3.30824 10.7248 2.89766C10.7248 2.71376 10.7248 2.53199 10.7248 2.34808C10.7248 2.27538 10.7291 2.20053 10.7376 2.12783C10.7291 2.18556 10.7227 2.24116 10.7141 2.2989C10.7333 2.15563 10.7718 2.01877 10.8274 1.88618C10.806 1.93751 10.7847 1.98883 10.7633 2.04015C10.8018 1.95461 10.8445 1.87121 10.8959 1.79423C10.898 1.78995 10.9408 1.7258 10.9429 1.7258C10.945 1.7258 10.836 1.85625 10.8937 1.78995C10.9279 1.75146 10.96 1.71297 10.9964 1.67662C11.0284 1.64454 11.0627 1.61246 11.099 1.58253C11.1375 1.54831 11.2038 1.52479 11.0456 1.62316C11.0648 1.61033 11.084 1.59536 11.1033 1.58253C11.1846 1.52693 11.2701 1.48202 11.3599 1.44139C11.3086 1.46277 11.2573 1.48416 11.2059 1.50554C11.3385 1.44994 11.4754 1.41359 11.6187 1.39221C11.5609 1.40076 11.5053 1.40717 11.4476 1.41573C11.5823 1.39862 11.717 1.39862 11.8517 1.41359C11.794 1.40504 11.7384 1.39862 11.6807 1.39007C11.8197 1.40931 11.9522 1.44353 12.0806 1.49485C12.0292 1.47347 11.9779 1.45208 11.9266 1.4307C11.995 1.4585 12.0592 1.49057 12.1233 1.52907C12.1597 1.55045 12.1939 1.57397 12.2281 1.59536C12.3265 1.65737 12.0998 1.48844 12.2089 1.58039C12.2645 1.62743 12.3158 1.67662 12.365 1.73008C12.4013 1.77071 12.4612 1.87335 12.3543 1.70869C12.3757 1.74291 12.4035 1.77712 12.4248 1.81134C12.6066 2.08933 13.0022 2.24116 13.3016 2.04229C13.4171 1.96531 13.539 1.90115 13.6651 1.84555C13.6138 1.86694 13.5625 1.88832 13.5112 1.90971C13.6865 1.837 13.8661 1.78782 14.0543 1.76215C13.9966 1.77071 13.941 1.77712 13.8833 1.78568C14.08 1.76002 14.2746 1.76002 14.4692 1.78568C14.4114 1.77712 14.3558 1.77071 14.2981 1.76215C14.4799 1.78782 14.6552 1.837 14.8242 1.90543C14.7728 1.88405 14.7215 1.86266 14.6702 1.84128C14.8006 1.89688 14.9247 1.96317 15.0423 2.04015C15.0658 2.05512 15.0872 2.07223 15.1107 2.08933C15.1984 2.14921 14.9717 1.97386 15.0915 2.07437C15.1406 2.11713 15.1898 2.1599 15.2369 2.20695C15.2839 2.25399 15.3267 2.30104 15.3695 2.35236C15.47 2.47211 15.2946 2.24544 15.3545 2.33312C15.3695 2.35664 15.3866 2.37802 15.4037 2.40155C15.4828 2.51916 15.5491 2.64319 15.6026 2.77363C15.5812 2.72231 15.5598 2.67099 15.5384 2.61966C15.6068 2.7886 15.656 2.96609 15.6817 3.14572C15.6731 3.08798 15.6667 3.03238 15.6581 2.97464C15.6838 3.1671 15.6838 3.35956 15.6603 3.55202C15.6688 3.49428 15.6753 3.43868 15.6838 3.38095C15.6581 3.56913 15.609 3.74876 15.5384 3.92411C15.5598 3.87279 15.5812 3.82146 15.6026 3.77014C15.5598 3.86851 15.5127 3.96474 15.4571 4.05669C15.4293 4.1016 15.3994 4.1465 15.3695 4.19141C15.3352 4.23846 15.269 4.2855 15.393 4.16361C15.3737 4.18286 15.3588 4.20424 15.3417 4.22563C15.2711 4.30689 15.1962 4.38173 15.115 4.45016C15.1043 4.46085 15.0573 4.48865 15.053 4.50148C15.0594 4.4801 15.1877 4.40098 15.0936 4.46941C15.0466 4.50362 14.9952 4.5357 14.9461 4.56564C14.6595 4.73885 14.5269 5.14943 14.7151 5.44239C14.9011 5.73108 15.2861 5.85939 15.5919 5.67334C16.6568 5.02754 17.1978 3.72737 16.8599 2.51916C16.582 1.52907 15.7223 0.701493 14.6959 0.530418C13.9859 0.412805 13.2567 0.52828 12.6494 0.930305C12.9423 1.00729 13.2353 1.08427 13.5261 1.16126C13.246 0.731431 12.8632 0.427774 12.3863 0.243869C11.9694 0.0834864 11.4732 0.0749326 11.0456 0.196823C10.2009 0.436327 9.57645 1.16981 9.46098 2.03587C9.42035 2.34595 9.43532 2.66457 9.43532 2.97678C9.43532 3.58624 9.43532 4.19783 9.43532 4.80728C9.43532 5.67334 9.43532 6.53727 9.43532 7.40333C9.43532 8.3806 9.43532 9.35786 9.43532 10.3351C9.43532 11.291 9.43532 12.2469 9.43532 13.2049C9.43532 13.9983 9.43532 14.7895 9.43532 15.5828C9.43532 16.0704 9.43532 16.558 9.43532 17.0455C9.43532 17.1332 9.43532 17.2209 9.43532 17.3085C9.43959 17.9822 9.71331 18.6536 10.2094 19.1155C10.8424 19.7036 11.7512 19.9388 12.5874 19.6993C13.4 19.4662 14.0522 18.8161 14.2896 18.0057C14.42 17.5587 14.4157 17.0669 14.2874 16.62C14.0244 16.883 13.7614 17.146 13.4983 17.4091C14.6381 17.6764 15.887 17.3257 16.6653 16.4318C17.4416 15.5358 17.7153 14.2506 17.2598 13.1365C16.9605 12.403 16.4258 11.7807 15.7073 11.4279C15.5512 11.3509 15.3866 11.3167 15.2134 11.3637C15.0637 11.4043 14.9033 11.5198 14.8306 11.6588C14.6787 11.9518 14.7386 12.3837 15.0615 12.5398Z" fill="white" stroke="white" strokeWidth="0.226945"/>
            </svg>
            <span className="logo-text">NEURALLY</span>
          </div>
        </div>
        <div className="nav-container">
          <div className="nav-menu">
            <div className="nav-item-wrapper">
              <div className="nav-frame">
                <a 
                  href="#" 
                  className={`nav-link ${activePage === 'home' ? 'active' : ''}`}
                  onClick={(e) => { e.preventDefault(); setActivePage('home'); }}
                >
                  Home
                </a>
              </div>
            </div>
            <div className="nav-item-wrapper clients">
              <div className="nav-frame">
                <a 
                  href="#" 
                  className={`nav-link ${activePage === 'clients' ? 'active' : ''}`}
                  onClick={(e) => { e.preventDefault(); setActivePage('clients'); }}
                >
                  Clients
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <button className="settings-btn">
        <svg width="36" height="36" viewBox="0 0 36 36" fill="none">
          <path d="M18.1833 9.66667H17.8167C17.3746 9.66667 16.9507 9.84227 16.6382 10.1548C16.3256 10.4674 16.15 10.8913 16.15 11.3333V11.4833C16.1497 11.7756 16.0725 12.0627 15.9263 12.3157C15.78 12.5687 15.5698 12.7789 15.3167 12.925L14.9583 13.1333C14.705 13.2796 14.4176 13.3566 14.125 13.3566C13.8324 13.3566 13.545 13.2796 13.2917 13.1333L13.1667 13.0667C12.7842 12.8461 12.3299 12.7862 11.9033 12.9003C11.4768 13.0143 11.113 13.293 10.8917 13.675L10.7083 13.9917C10.4877 14.3741 10.4279 14.8285 10.5419 15.255C10.656 15.6815 10.9346 16.0454 11.3167 16.2667L11.4417 16.35C11.6936 16.4954 11.903 16.7042 12.0492 16.9557C12.1954 17.2071 12.2732 17.4925 12.275 17.7833V18.2083C12.2762 18.502 12.1997 18.7908 12.0534 19.0454C11.907 19.3001 11.696 19.5115 11.4417 19.6583L11.3167 19.7333C10.9346 19.9546 10.656 20.3185 10.5419 20.745C10.4279 21.1715 10.4877 21.6259 10.7083 22.0083L10.8917 22.325C11.113 22.7071 11.4768 22.9857 11.9033 23.0997C12.3299 23.2138 12.7842 23.154 13.1667 22.9333L13.2917 22.8667C13.545 22.7204 13.8324 22.6434 14.125 22.6434C14.4176 22.6434 14.705 22.7204 14.9583 22.8667L15.3167 23.075C15.5698 23.2211 15.78 23.4313 15.9263 23.6843C16.0725 23.9373 16.1497 24.2244 16.15 24.5167V24.6667C16.15 25.1087 16.3256 25.5326 16.6382 25.8452C16.9507 26.1577 17.3746 26.3333 17.8167 26.3333H18.1833C18.6254 26.3333 19.0493 26.1577 19.3618 25.8452C19.6744 25.5326 19.85 25.1087 19.85 24.6667V24.5167C19.8503 24.2244 19.9275 23.9373 20.0737 23.6843C20.22 23.4313 20.4302 23.2211 20.6833 23.075L21.0417 22.8667C21.295 22.7204 21.5824 22.6434 21.875 22.6434C22.1676 22.6434 22.455 22.7204 22.7083 22.8667L22.8333 22.9333C23.2158 23.154 23.6701 23.2138 24.0967 23.0997C24.5232 22.9857 24.887 22.7071 25.1083 22.325L25.2917 22C25.5123 21.6176 25.5721 21.1632 25.4581 20.7367C25.344 20.3101 25.0654 19.9463 24.6833 19.725L24.5583 19.6583C24.304 19.5115 24.093 19.3001 23.9466 19.0454C23.8003 18.7908 23.7238 18.502 23.725 18.2083V17.7917C23.7238 17.498 23.8003 17.2092 23.9466 16.9546C24.093 16.7 24.304 16.4885 24.5583 16.3417L24.6833 16.2667C25.0654 16.0454 25.344 15.6815 25.4581 15.255C25.5721 14.8285 25.5123 14.3741 25.2917 13.9917L25.1083 13.675C24.887 13.293 24.5232 13.0143 24.0967 12.9003C23.6701 12.7862 23.2158 12.8461 22.8333 13.0667L22.7083 13.1333C22.455 13.2796 22.1676 13.3566 21.875 13.3566C21.5824 13.3566 21.295 13.2796 21.0417 13.1333L20.6833 12.925C20.4302 12.7789 20.22 12.5687 20.0737 12.3157C19.9275 12.0627 19.8503 11.7756 19.85 11.4833V11.3333C19.85 10.8913 19.6744 10.4674 19.3618 10.1548C19.0493 9.84227 18.6254 9.66667 18.1833 9.66667Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M18 20.5C19.3807 20.5 20.5 19.3807 20.5 18C20.5 16.6193 19.3807 15.5 18 15.5C16.6193 15.5 15.5 16.6193 15.5 18C15.5 19.3807 16.6193 20.5 18 20.5Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
        </svg>
      </button>
      <div className="user-avatar-wrapper" ref={menuRef}>
        <div 
          className="user-avatar" 
          onClick={() => setShowUserMenu(!showUserMenu)}
          style={{ cursor: 'pointer' }}
        >
          <span>{getUserInitials()}</span>
        </div>
        {showUserMenu && (
          <div className="user-menu">
            <div className="user-menu-header">
              {user?.picture && (
                <img src={user.picture} alt="Profile" className="user-menu-avatar" />
              )}
              <div className="user-menu-info">
                <p className="user-menu-name">{user?.name || 'User'}</p>
                <p className="user-menu-email">{user?.email || ''}</p>
              </div>
            </div>
            <div className="user-menu-divider"></div>
            <button className="user-menu-item logout" onClick={handleLogout}>
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                <path d="M6.75 15.75H3.75C3.35218 15.75 2.97064 15.592 2.68934 15.3107C2.40804 15.0294 2.25 14.6478 2.25 14.25V3.75C2.25 3.35218 2.40804 2.97064 2.68934 2.68934C2.97064 2.40804 3.35218 2.25 3.75 2.25H6.75" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
                <path d="M12 12.75L15.75 9L12 5.25" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
                <path d="M15.75 9H6.75" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
              </svg>
              Logout
            </button>
          </div>
        )}
      </div>
    </header>
  );
}

export default Header;
